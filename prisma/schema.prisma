generator client {
  provider  = "prisma-client-py"
  interface = "asyncio"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum StatusType {
  PROCESSING
  PUBLISHED
  DELETED
}

model Cafe {
  id           String     @id @default(cuid())
  areaA        String
  areaB        String
  name         String
  intro        String     @default("") @db.Text
  addressLine  String     @default("")
  lat          Float      @default(0.0)
  lng          Float      @default(0.0)
  images       Json
  website      String     @default("")
  tel          String     @default("")
  openingHours Json
  themes       Theme[]
  status       StatusType
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@map("cafes")
}

model Genre {
  id        String   @id
  themes    Theme[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("genre")
}

model Theme {
  id             String     @id @default(cuid())
  cafe           Cafe       @relation(fields: [cafeId], references: [id])
  cafeId         String
  name           String
  intro          String     @db.Text
  thumbnail      String     @default("")
  genre          Genre[]
  price          Int        @default(0)
  lockingRatio   Int        @default(0)
  during         Int        @default(0)
  minPerson      Int        @default(0)
  maxPerson      Int        @default(0)
  level          Float      @default(0.0)
  fear           Int        @default(0)
  detailUrl      String     @default("")
  reservationUrl String     @default("")
  openDate       String     @default("")
  status         StatusType
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  @@map("themes")
}
